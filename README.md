# docker-ssh-nat

ä¸“ä¸º NAT å°é¸¡è®¾è®¡çš„è½»é‡çº§ SSH å®¹å™¨é•œåƒ,å†…ç½®å¸¸ç”¨ç½‘ç»œå·¥å…·,æ”¯æŒç«¯å£è½¬å‘ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- âœ… **å¤šç‰ˆæœ¬æ”¯æŒ**: æä¾› Debian, Ubuntu, Alpine, CentOS å››å¤§å¸¸ç”¨ç³»ç»Ÿç‰ˆæœ¬
- âœ… **å¸¸ç”¨å·¥å…·ç®±**: å†…ç½® 30+ å·¥å…· (curl, wget, ping, telnet, traceroute, dig, vim, htop, iotop, lsof, zip, tree ç­‰)
- âœ… **çµæ´»è®¤è¯**: æ”¯æŒè‡ªå®šä¹‰ root å¯†ç æˆ–è‡ªåŠ¨ç”Ÿæˆéšæœºå¯†ç (8-10ä½)
- âœ… **ç²¾ç¾ Banner**: ç™»å½•æ—¶æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯å’Œå‘½ä»¤é€ŸæŸ¥
- âœ… **NAT ä¼˜åŒ–**: ä¸“ä¸ºç«¯å£æ®µæ˜ å°„åœºæ™¯ä¼˜åŒ–,ä¸»æœºä¸å®¹å™¨ç«¯å£å®Œç¾å¯¹åº”

## ğŸš€ NAT å°é¸¡ä¸€é”®éƒ¨ç½²

ä½¿ç”¨æä¾›çš„ `deploy-nat.sh` è„šæœ¬å¯ä»¥å¿«é€Ÿåˆ›å»º NAT å°é¸¡å®¹å™¨ã€‚

### 1. å‡†å¤‡å·¥ä½œ
```bash
# è·å–æºç 
git clone https://github.com/qiuapeng921/docker-ssh-nat.git
cd docker-ssh-nat

# èµ‹äºˆæƒé™
chmod +x deploy-nat.sh
```

**é•œåƒä»“åº“:**
æœ¬é¡¹ç›®é•œåƒå·²æ‰˜ç®¡è‡³ GitHub Container Registry (GHCR):
- Debian: `ghcr.io/qiuapeng921/docker-ssh-nat-debian:latest`
- Ubuntu: `ghcr.io/qiuapeng921/docker-ssh-nat-ubuntu:latest`
- Alpine: `ghcr.io/qiuapeng921/docker-ssh-nat-alpine:latest`
- CentOS: `ghcr.io/qiuapeng921/docker-ssh-nat-centos:latest`

> è„šæœ¬ `deploy-nat.sh` ä¼šè‡ªåŠ¨æ£€æµ‹æœ¬åœ°æ˜¯å¦æœ‰é•œåƒï¼Œå¦‚æœæ²¡æœ‰ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºã€‚

### 2. å¯åŠ¨å°é¸¡

#### æ–¹æ³• A: æœ¬åœ°æ‰§è¡Œ (æ¨è)
```bash
# ç”¨æ³•: ./deploy-nat.sh -t <é•œåƒç±»å‹> [é€‰é¡¹]
# ç¤ºä¾‹: å¯åŠ¨ä¸€ä¸ªå¯†ç ä¸º 123456 çš„ Debian å°é¸¡
./deploy-nat.sh -t debian -p 123456

# ç¤ºä¾‹: å¯åŠ¨ä¸€ä¸ª Ubuntu å°é¸¡
./deploy-nat.sh -t ubuntu
```

#### æ–¹æ³• B: è¿œç¨‹ä¸€é”®æ‰§è¡Œ (ä¸éœ€ä¸‹è½½)
```bash
# ç”¨æ³•: bash <(curl -sSL <URL>) <é€‰é¡¹>
# ç¤ºä¾‹: å¯åŠ¨ä¸€ä¸ªéšæœºå¯†ç çš„ Alpine å°é¸¡
bash <(curl -sSL https://raw.githubusercontent.com/qiuapeng921/docker-ssh-nat/master/deploy-nat.sh) -t alpine
```

**å‚æ•°è¯´æ˜:**
- `-t`: é•œåƒç±»å‹ (`debian`, `ubuntu`, `alpine`, `centos`)ï¼Œ**å¿…å¡«**ã€‚
- `-p`: root å¯†ç ï¼Œå¦‚æœä¸å¡«åˆ™è‡ªåŠ¨ç”Ÿæˆ **8-10 ä½**éšæœºå¯†ç ã€‚
- `-c`: CPU é™åˆ¶ï¼Œé»˜è®¤ä½ `1` æ ¸ã€‚
- `-m`: å†…å­˜é™åˆ¶ (MB)ï¼ŒDebian é»˜è®¤ `512`ï¼ŒAlpine é»˜è®¤ `128`ã€‚

**è‡ªåŠ¨åŒ–é€»è¾‘ (IP é€’å¢åˆ†é…):**
- **å†…ç½‘ IP**: è‡ªåŠ¨ä» `192.168.10.2` å¼€å§‹é€’å¢åˆ†é…ï¼ˆ`.1` é¢„ç•™ç»™ç½‘ç®¡ï¼‰ã€‚
- **SSH ç«¯å£**: `10000 + IPæœ€åä¸€ä½`ï¼ˆå¦‚ IP `.2` -> ç«¯å£ `10002`ï¼‰ã€‚
- **NAT ç«¯å£**: `20000 + IPæœ€åä¸€ä½ Ã— 10` å¼€å§‹çš„ **10 ä¸ªç«¯å£**ã€‚
  - ä¾‹å¦‚ï¼šIP `192.168.10.2` -> NAT ç«¯å£ `20020-20029`
  - ä¾‹å¦‚ï¼šIP `192.168.10.3` -> NAT ç«¯å£ `20030-20039`

## ğŸ› ï¸ ç®¡ç†ä¸ä½¿ç”¨

### äº¤äº’å¼ç®¡ç† (æ¨è)
ä½¿ç”¨ `manage-nat.sh` è„šæœ¬å¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†æ‰€æœ‰ NAT å®¹å™¨ï¼š

```bash
# æœ¬åœ°æ‰§è¡Œ
bash manage-nat.sh

# è¿œç¨‹ä¸€é”®æ‰§è¡Œ (ä¸éœ€ä¸‹è½½)
bash <(curl -sSL https://raw.githubusercontent.com/qiuapeng921/docker-ssh-nat/master/manage-nat.sh)
```

**åŠŸèƒ½åŒ…æ‹¬:**
- ğŸ“‹ åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ï¼ˆçŠ¶æ€ã€IPã€ç«¯å£ï¼‰
- â–¶ï¸ å¯åŠ¨/åœæ­¢/é‡å¯å®¹å™¨
- ğŸ—‘ï¸ åˆ é™¤å®¹å™¨
- ğŸ“ æŸ¥çœ‹æ—¥å¿—

**ä½¿ç”¨æµç¨‹:**
1. è¿è¡Œè„šæœ¬åä¼šæ˜¾ç¤ºæ‰€æœ‰å®¹å™¨åˆ—è¡¨
2. è¾“å…¥æ“ä½œé€‰é¡¹ï¼ˆ1-6ï¼‰å¹¶å›è½¦
3. è¾“å…¥è¦æ“ä½œçš„å®¹å™¨åºå·å¹¶å›è½¦
4. ç¡®è®¤æ“ä½œï¼ˆåˆ é™¤æ—¶éœ€è¦äºŒæ¬¡ç¡®è®¤ï¼‰

> æ³¨æ„ï¼šè„šæœ¬åªæ˜¾ç¤ºç¬¦åˆè§„èŒƒçš„å®¹å™¨ï¼ˆå¦‚ `nat-debian-2`ï¼‰ï¼Œæ—§ç‰ˆæœ¬éæ ‡å‡†å‘½åçš„å®¹å™¨å¯èƒ½ä¸ä¼šæ˜¾ç¤ºã€‚

### è¿æ¥å®¹å™¨
- **SSH ç™»å½•**: `ssh root@<æœåŠ¡å™¨IP> -p <è„šæœ¬è¾“å‡ºçš„ç«¯å£>`
- **å®¹å™¨å‘½å**: `nat-debian-2`, `nat-alpine-3` ... (æ ¼å¼: `nat-[ç³»ç»Ÿ]-åºå·`)

### å¸¸ç”¨ç®¡ç†å‘½ä»¤
```bash
# æŸ¥çœ‹å°é¸¡çŠ¶æ€
docker ps | grep nat-

# æŸ¥çœ‹å°é¸¡æ—¥å¿—(åŒ…å«å¯†ç ä¿¡æ¯)
docker logs nat-1

# åœæ­¢å¹¶åˆ é™¤å°é¸¡
docker rm -f nat-1
```

## ğŸŒ ç«¯å£æ˜ å°„é€»è¾‘
- ä¸»æœºç«¯å£ä¸å®¹å™¨ç«¯å£**å®Œå…¨ä¸€è‡´**ã€‚
- å¦‚æœä½ æŒ‡å®šç«¯å£èŒƒå›´ `10000-10100`,åˆ™åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œçš„æœåŠ¡ä¹Ÿå¿…é¡»ç›‘å¬åœ¨ `10000-10100` ä¹‹é—´çš„ç«¯å£æ‰èƒ½é€šè¿‡å¤–ç½‘è®¿é—®ã€‚

## ğŸ“¦ åŒ…å«çš„å¸¸ç”¨å‘½ä»¤
- **ç½‘ç»œ**: `ping`, `telnet`, `traceroute`, `dig`, `curl`, `wget`, `ifconfig`, `ip`, `netstat`
- **ç›‘æ§**: `htop`, `iotop`, `lsof`, `ps`
- **ç¼–è¾‘**: `vim`
- **å·¥å…·**: `tar`, `gzip`, `unzip`, `tree`

## è®¸å¯è¯
MIT License
